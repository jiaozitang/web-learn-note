{"version":3,"file":"bundle.js","sources":["../node_modules/_@babel_runtime@7.14.5@@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/_@babel_runtime@7.14.5@@babel/runtime/helpers/esm/defineProperty.js","../src/手写系列/Promise/多次调用then.js"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","// Promise 的 3 种状态\nconst STATUS = {\n  PENDING: 'pending',\n  FULFILLED: 'fulfilled',\n  REJECTED: 'rejected'\n}\n\nclass MyPromise {\n  constructor (executor) {\n      // 执行器\n      try {\n          executor(this.resolve, this.reject)\n      } catch (reason) {\n          this.reject(reason)\n      }\n  }\n\n  // 成功回调\n  onFulfilledCallback = []\n\n  // 失败回调\n  onRejectedCallback = []\n\n  // 初始状态为 pending\n  status = STATUS.PENDING\n  \n  // 请求成功时的返回值\n  value = null\n  \n  // 请求失败的原因\n  reason = null\n  \n  // 修改 Promise 状态，并定义成功返回值\n  resolve = value => {\n    if (this.status === STATUS.PENDING) {\n        this.status = STATUS.FULFILLED\n        this.value = value\n\n        while(this.onFulfilledCallback.length) {\n            this.onFulfilledCallback.shift()(value)\n        }\n    }\n  }\n  \n  // 修改 Promise 状态，并定义失败返回值\n    reject = value => {\n        if (this.status === STATUS.PENDING) {\n            this.status = STATUS.REJECTED\n            this.reason = value\n\n            while(this.onRejectedCallback.length) {\n                this.onRejectedCallback.shift()(value)\n            }\n        }\n    }\n\n    then = function (onFulfilled, onRejected) {\n        onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : value => value\n        onRejected = typeof onRejected === 'function' ? onRejected : reason => { throw reason }\n        if (this.status === STATUS.PENDING) {\n          this.onFulfilledCallback.push(onFulfilled)\n          this.onRejectedCallback.push(onRejected)\n        } else if (this.status === STATUS.FULFILLED) {\n            onFulfilled(this.value)\n        } else if (this.status === STATUS.REJECTED) {\n            onRejected(this.reason)\n        }\n    }\n}\n\nconst mypromise = new MyPromise((resolve, reject) => {\n  resolve('成功')\n})\n\nmypromise.then(data => {\n  console.log(data, '1')\n})\n\nmypromise.then(data => {\n  console.log(data, '2')\n})\n"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","STATUS","PENDING","FULFILLED","REJECTED","MyPromise","executor","status","onFulfilledCallback","length","shift","reason","onRejectedCallback","onFulfilled","onRejected","push","resolve","reject","mypromise","then","data","console","log"],"mappings":"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"}