{"version":3,"file":"bundle.js","sources":["../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../src/设计模式/观察者模式/双向数据绑定/简单版/index.js"],"sourcesContent":["export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","// 可发布可订阅的对象\nconst Pubsub = {\n    subscrib: function (ev, callback) {\n        this._callbacks || (this._callbacks = {});\n        (this._callbacks[ev] || (this._callbacks[ev] = [])).push(callback);\n    },\n\n    publish: function () {\n        const args = [...arguments]\n        const ev = args.shift()\n\n        if (!this._callbacks) return\n        if (!this._callbacks[ev]) return\n\n        this._callbacks[ev].forEach(callback => {\n            callback(...args)\n        })\n    }\n}\n\n// 订阅model更新消息，更新后所有符合条件的dom节点都会收到通知，进行更新\nPubsub.subscrib('model-update-event', function ({propNameWhole, propValue}) {\n    const elements = document.querySelectorAll(`[data-bind=\"${propNameWhole}\"]`)\n\n    elements.forEach(element => {\n        const elementTagName = element.tagName.toLowerCase()\n        const formTypeTagNames = ['input', 'select', 'textarea']\n        if (formTypeTagNames.includes(elementTagName)) {\n            element.value = propValue\n        } else {\n            element.innerHTML = propValue\n        }\n    })\n})\n\n// 添加onchange/onkeyup事件，触发时，发布ui更新消息 start\nfunction eventHander (e) {\n    const { target } = e\n    const { value: propValue } = target\n\n    const propNameWhole = target.getAttribute('data-bind')\n    if (propNameWhole) {\n        console.log(propNameWhole, 123)\n        // 发布ui更新消息\n        Pubsub.publish('ui-update-event', { propNameWhole, propValue })\n    }\n}\n\ndocument.addEventListener('change', eventHander, false)\ndocument.addEventListener('keyup', eventHander, false)\n\n// end\n\nclass Bind {\n    constructor () {\n        this.modelName = ''\n    }\n\n    initModal ({ modelName }) {\n        this.modelName = modelName\n\n        // 订阅ui更新消息\n        Pubsub.subscrib('ui-update-event', ({propNameWhole, propValue}) => {\n            const [ , _propName] = propNameWhole.split('.')\n            this.updateModalData(_propName, propValue)\n        })\n    }\n\n    loadModalData (modelData) {\n        for (let propName in modelData) {\n            this.updateModalData(propName, modelData[propName])\n        }\n    }\n\n    updateModalData (propName, propValue) {\n        const propNameWhole = `${this.modelName}.${propName}`\n        // 发布model更新消息\n        Pubsub.publish('model-update-event', { propNameWhole, propValue });\n    }\n\n}\n\nconst user = new Bind()\n\nuser.initModal({\n    modelName: 'user'\n})\n\nuser.loadModalData({\n    name: 'tj',\n    age: '18'\n})"],"names":["_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","_i","Symbol","iterator","_arr","_n","_d","_s","_e","call","next","done","push","value","length","err","_arrayLikeToArray","len","arr2","_unsupportedIterableToArray","o","minLen","arrayLikeToArray","n","Object","prototype","toString","slice","constructor","name","from","test","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_arrayWithoutHoles","_iterableToArray","iter","_nonIterableSpread","_toConsumableArray","arrayWithoutHoles","iterableToArray","nonIterableSpread","Pubsub","subscrib","ev","callback","_callbacks","publish","args","arguments","shift","forEach","propNameWhole","propValue","elements","document","querySelectorAll","element","elementTagName","tagName","toLowerCase","formTypeTagNames","includes","innerHTML","eventHander","e","getAttribute","console","log","addEventListener","Bind","modelName","split","_propName","updateModalData","modelData","propName","user","initModal","loadModalData","age"],"mappings":"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"}