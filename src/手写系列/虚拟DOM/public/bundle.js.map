{"version":3,"file":"bundle.js","sources":["../src/lib/util.js","../src/lib/element.js","../../../../node_modules/@babel/runtime/helpers/esm/typeof.js","../src/lib/patch.js","../../../../node_modules/list-diff2/lib/diff.js","../../../../node_modules/list-diff2/index.js","../src/lib/diff.js","../src/index.js"],"sourcesContent":["var _ = exports\n\n_.type = function (obj) {\n  return Object.prototype.toString.call(obj).replace(/\\[object\\s|\\]/g, '')\n}\n\n_.isArray = function isArray (list) {\n  return _.type(list) === 'Array'\n}\n\n_.slice = function slice (arrayLike, index) {\n  return Array.prototype.slice.call(arrayLike, index)\n}\n\n_.truthy = function truthy (value) {\n  return !!value\n}\n\n_.isString = function isString (list) {\n  return _.type(list) === 'String'\n}\n\n_.each = function each (array, fn) {\n  for (var i = 0, len = array.length; i < len; i++) {\n    fn(array[i], i)\n  }\n}\n\n_.toArray = function toArray (listLike) {\n  if (!listLike) {\n    return []\n  }\n\n  var list = []\n\n  for (var i = 0, len = listLike.length; i < len; i++) {\n    list.push(listLike[i])\n  }\n\n  return list\n}\n\n_.setAttr = function setAttr (node, key, value) {\n  switch (key) {\n    case 'style':\n      node.style.cssText = value\n      break\n    case 'value':\n      var tagName = node.tagName || ''\n      tagName = tagName.toLowerCase()\n      if (\n        tagName === 'input' || tagName === 'textarea'\n      ) {\n        node.value = value\n      } else {\n        // if it is not a input or textarea, use `setAttribute` to set\n        node.setAttribute(key, value)\n      }\n      break\n    default:\n      node.setAttribute(key, value)\n      break\n  }\n}\n","var _ = require('./util')\r\n\r\n/**\r\n * Virtual-dom Element.\r\n * @param {String} tagName\r\n * @param {Object} props - Element's properties,\r\n *                       - using object to store key-value pair\r\n * @param {Array<Element|String>} - This element's children elements.\r\n *                                - Can be Element instance or just a piece plain text.\r\n */\r\nfunction Element (tagName, props, children) {\r\n  if (!(this instanceof Element)) {\r\n    if (!_.isArray(children) && children != null) {\r\n      children = _.slice(arguments, 2).filter(_.truthy)\r\n    }\r\n    return new Element(tagName, props, children)\r\n  }\r\n\r\n  if (_.isArray(props)) {\r\n    children = props\r\n    props = {}\r\n  }\r\n\r\n  this.tagName = tagName\r\n  this.props = props || {}\r\n  this.children = children || []\r\n  this.key = props\r\n    ? props.key\r\n    : void 666\r\n\r\n  var count = 0\r\n\r\n  _.each(this.children, function (child, i) {\r\n    if (child instanceof Element) {\r\n      count += child.count\r\n    } else {\r\n      children[i] = '' + child\r\n    }\r\n    count++\r\n  })\r\n\r\n  this.count = count\r\n}\r\n\r\n/**\r\n * Render the hold element tree.\r\n */\r\nElement.prototype.render = function () {\r\n  var el = document.createElement(this.tagName)\r\n  var props = this.props\r\n\r\n  for (var propName in props) {\r\n    var propValue = props[propName]\r\n    _.setAttr(el, propName, propValue)\r\n  }\r\n\r\n  _.each(this.children, function (child) {\r\n    var childEl = (child instanceof Element)\r\n      ? child.render()\r\n      : document.createTextNode(child)\r\n    el.appendChild(childEl)\r\n  })\r\n\r\n  return el\r\n}\r\n\r\nmodule.exports = Element\r\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","var _ = require('./util')\n\nvar REPLACE = 0\nvar REORDER = 1\nvar PROPS = 2\nvar TEXT = 3\n\nfunction patch (node, patches) {\n  var walker = {index: 0}\n  dfsWalk(node, walker, patches)\n}\n\nfunction dfsWalk (node, walker, patches) {\n  var currentPatches = patches[walker.index]\n\n  var len = node.childNodes\n    ? node.childNodes.length\n    : 0\n  for (var i = 0; i < len; i++) {\n    var child = node.childNodes[i]\n    walker.index++\n    dfsWalk(child, walker, patches)\n  }\n\n  if (currentPatches) {\n    applyPatches(node, currentPatches)\n  }\n}\n\nfunction applyPatches (node, currentPatches) {\n  _.each(currentPatches, function (currentPatch) {\n    switch (currentPatch.type) {\n      case REPLACE:\n        var newNode = (typeof currentPatch.node === 'string')\n          ? document.createTextNode(currentPatch.node)\n          : currentPatch.node.render()\n        node.parentNode.replaceChild(newNode, node)\n        break\n      case REORDER:\n        reorderChildren(node, currentPatch.moves)\n        break\n      case PROPS:\n        setProps(node, currentPatch.props)\n        break\n      case TEXT:\n        if (node.textContent) {\n          node.textContent = currentPatch.content\n        } else {\n          // fuck ie\n          node.nodeValue = currentPatch.content\n        }\n        break\n      default:\n        throw new Error('Unknown patch type ' + currentPatch.type)\n    }\n  })\n}\n\nfunction setProps (node, props) {\n  for (var key in props) {\n    if (props[key] === void 666) {\n      node.removeAttribute(key)\n    } else {\n      var value = props[key]\n      _.setAttr(node, key, value)\n    }\n  }\n}\n\nfunction reorderChildren (node, moves) {\n  var staticNodeList = _.toArray(node.childNodes)\n  var maps = {}\n\n  _.each(staticNodeList, function (node) {\n    if (node.nodeType === 1) {\n      var key = node.getAttribute('key')\n      if (key) {\n        maps[key] = node\n      }\n    }\n  })\n\n  _.each(moves, function (move) {\n    var index = move.index\n    if (move.type === 0) { // remove item\n      if (staticNodeList[index] === node.childNodes[index]) { // maybe have been removed for inserting\n        node.removeChild(node.childNodes[index])\n      }\n      staticNodeList.splice(index, 1)\n    } else if (move.type === 1) { // insert item\n      var insertNode = maps[move.item.key]\n        ? maps[move.item.key].cloneNode(true) // reuse old item\n        : (typeof move.item === 'object')\n            ? move.item.render()\n            : document.createTextNode(move.item)\n      staticNodeList.splice(index, 0, insertNode)\n      node.insertBefore(insertNode, node.childNodes[index] || null)\n    }\n  })\n}\n\npatch.REPLACE = REPLACE\npatch.REORDER = REORDER\npatch.PROPS = PROPS\npatch.TEXT = TEXT\n\nmodule.exports = patch\n","/**\r\n * Diff two list in O(N).\r\n * @param {Array} oldList - Original List\r\n * @param {Array} newList - List After certain insertions, removes, or moves\r\n * @return {Object} - {moves: <Array>}\r\n *                  - moves is a list of actions that telling how to remove and insert\r\n */\r\nfunction diff (oldList, newList, key) {\r\n  var oldMap = makeKeyIndexAndFree(oldList, key)\r\n  var newMap = makeKeyIndexAndFree(newList, key)\r\n\r\n  var newFree = newMap.free\r\n\r\n  var oldKeyIndex = oldMap.keyIndex\r\n  var newKeyIndex = newMap.keyIndex\r\n\r\n  var moves = []\r\n\r\n  // a simulate list to manipulate\r\n  var children = []\r\n  var i = 0\r\n  var item\r\n  var itemKey\r\n  var freeIndex = 0\r\n\r\n  // fist pass to check item in old list: if it's removed or not\r\n  while (i < oldList.length) {\r\n    item = oldList[i]\r\n    itemKey = getItemKey(item, key)\r\n    if (itemKey) {\r\n      if (!newKeyIndex.hasOwnProperty(itemKey)) {\r\n        children.push(null)\r\n      } else {\r\n        var newItemIndex = newKeyIndex[itemKey]\r\n        children.push(newList[newItemIndex])\r\n      }\r\n    } else {\r\n      var freeItem = newFree[freeIndex++]\r\n      children.push(freeItem || null)\r\n    }\r\n    i++\r\n  }\r\n\r\n  var simulateList = children.slice(0)\r\n\r\n  // remove items no longer exist\r\n  i = 0\r\n  while (i < simulateList.length) {\r\n    if (simulateList[i] === null) {\r\n      remove(i)\r\n      removeSimulate(i)\r\n    } else {\r\n      i++\r\n    }\r\n  }\r\n\r\n  // i is cursor pointing to a item in new list\r\n  // j is cursor pointing to a item in simulateList\r\n  var j = i = 0\r\n  while (i < newList.length) {\r\n    item = newList[i]\r\n    itemKey = getItemKey(item, key)\r\n\r\n    var simulateItem = simulateList[j]\r\n    var simulateItemKey = getItemKey(simulateItem, key)\r\n\r\n    if (simulateItem) {\r\n      if (itemKey === simulateItemKey) {\r\n        j++\r\n      } else {\r\n        // new item, just inesrt it\r\n        if (!oldKeyIndex.hasOwnProperty(itemKey)) {\r\n          insert(i, item)\r\n        } else {\r\n          // if remove current simulateItem make item in right place\r\n          // then just remove it\r\n          var nextItemKey = getItemKey(simulateList[j + 1], key)\r\n          if (nextItemKey === itemKey) {\r\n            remove(i)\r\n            removeSimulate(j)\r\n            j++ // after removing, current j is right, just jump to next one\r\n          } else {\r\n            // else insert item\r\n            insert(i, item)\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      insert(i, item)\r\n    }\r\n\r\n    i++\r\n  }\r\n\r\n  function remove (index) {\r\n    var move = {index: index, type: 0}\r\n    moves.push(move)\r\n  }\r\n\r\n  function insert (index, item) {\r\n    var move = {index: index, item: item, type: 1}\r\n    moves.push(move)\r\n  }\r\n\r\n  function removeSimulate (index) {\r\n    simulateList.splice(index, 1)\r\n  }\r\n\r\n  return {\r\n    moves: moves,\r\n    children: children\r\n  }\r\n}\r\n\r\n/**\r\n * Convert list to key-item keyIndex object.\r\n * @param {Array} list\r\n * @param {String|Function} key\r\n */\r\nfunction makeKeyIndexAndFree (list, key) {\r\n  var keyIndex = {}\r\n  var free = []\r\n  for (var i = 0, len = list.length; i < len; i++) {\r\n    var item = list[i]\r\n    var itemKey = getItemKey(item, key)\r\n    if (itemKey) {\r\n      keyIndex[itemKey] = i\r\n    } else {\r\n      free.push(item)\r\n    }\r\n  }\r\n  return {\r\n    keyIndex: keyIndex,\r\n    free: free\r\n  }\r\n}\r\n\r\nfunction getItemKey (item, key) {\r\n  if (!item || !key) return void 666\r\n  return typeof key === 'string'\r\n    ? item[key]\r\n    : key(item)\r\n}\r\n\r\nexports.makeKeyIndexAndFree = makeKeyIndexAndFree // exports for test\r\nexports.diff = diff\r\n","module.exports = require('./lib/diff').diff\n","var _ = require('./util')\nvar patch = require('./patch')\nvar listDiff = require('list-diff2')\n\nfunction diff (oldTree, newTree) {\n  var index = 0\n  var patches = {}\n  dfsWalk(oldTree, newTree, index, patches)\n  return patches\n}\n\nfunction dfsWalk (oldNode, newNode, index, patches) {\n  var currentPatch = []\n\n  // Node is removed.\n  if (newNode === null) {\n    // Real DOM node will be removed when perform reordering, so has no needs to do anything in here\n  // TextNode content replacing\n  } else if (_.isString(oldNode) && _.isString(newNode)) {\n    if (newNode !== oldNode) {\n      currentPatch.push({ type: patch.TEXT, content: newNode })\n    }\n  // Nodes are the same, diff old node's props and children\n  } else if (\n      oldNode.tagName === newNode.tagName &&\n      oldNode.key === newNode.key\n    ) {\n    // Diff props\n    var propsPatches = diffProps(oldNode, newNode)\n    if (propsPatches) {\n      currentPatch.push({ type: patch.PROPS, props: propsPatches })\n    }\n    // Diff children. If the node has a `ignore` property, do not diff children\n    if (!isIgnoreChildren(newNode)) {\n      diffChildren(\n        oldNode.children,\n        newNode.children,\n        index,\n        patches,\n        currentPatch\n      )\n    }\n  // Nodes are not the same, replace the old node with new node\n  } else {\n    currentPatch.push({ type: patch.REPLACE, node: newNode })\n  }\n\n  if (currentPatch.length) {\n    patches[index] = currentPatch\n  }\n}\n\nfunction diffChildren (oldChildren, newChildren, index, patches, currentPatch) {\n  var diffs = listDiff(oldChildren, newChildren, 'key')\n  newChildren = diffs.children\n\n  if (diffs.moves.length) {\n    var reorderPatch = { type: patch.REORDER, moves: diffs.moves }\n    currentPatch.push(reorderPatch)\n  }\n\n  var leftNode = null\n  var currentNodeIndex = index\n  _.each(oldChildren, function (child, i) {\n    var newChild = newChildren[i]\n    currentNodeIndex = (leftNode && leftNode.count)\n      ? currentNodeIndex + leftNode.count + 1\n      : currentNodeIndex + 1\n    dfsWalk(child, newChild, currentNodeIndex, patches)\n    leftNode = child\n  })\n}\n\nfunction diffProps (oldNode, newNode) {\n  var count = 0\n  var oldProps = oldNode.props\n  var newProps = newNode.props\n\n  var key, value\n  var propsPatches = {}\n\n  // Find out different properties\n  for (key in oldProps) {\n    value = oldProps[key]\n    if (newProps[key] !== value) {\n      count++\n      propsPatches[key] = newProps[key]\n    }\n  }\n\n  // Find out new property\n  for (key in newProps) {\n    value = newProps[key]\n    if (!oldProps.hasOwnProperty(key)) {\n      count++\n      propsPatches[key] = newProps[key]\n    }\n  }\n\n  // If properties all are identical\n  if (count === 0) {\n    return null\n  }\n\n  return propsPatches\n}\n\nfunction isIgnoreChildren (node) {\n  return (node.props && node.props.hasOwnProperty('ignore'))\n}\n\nmodule.exports = diff\n","import Element from './lib/element'\nimport diff from './lib/diff'\nimport patch from './lib/patch'\n\nconst el = Element\n\nlet count = 0\n\nfunction renderTree () {\n    count++\n\n    var items = []\n    var color = (count % 2 === 0)\n      ? 'blue'\n      : 'red'\n\n    for (var i = 0; i < count; i++) {\n      items.push(el('li', ['Item #' + i]))\n    }\n\n    return el('div', {'id': 'container'}, [\n      el('h1', {style: 'color: ' + color}, ['simple virtal dom']),\n      el('p', ['the count is :' + count]),\n      el('ul', items)\n    ])\n  }\n\nlet tree = renderTree()\nconst root = tree.render()\ndocument.body.appendChild(root)\n\nsetInterval(() => {\n    const newTree = renderTree()\n    const patches = diff(tree, newTree)\n    patch(root, patches)\n\n    tree = newTree\n}, 2000)\n"],"names":["_","exports","type","obj","Object","prototype","toString","call","replace","isArray","list","slice","arrayLike","index","Array","truthy","value","isString","each","array","fn","i","len","length","toArray","listLike","push","setAttr","node","key","style","cssText","tagName","toLowerCase","setAttribute","require$$0","Element","props","children","arguments","filter","count","child","render","el","document","createElement","propName","propValue","childEl","createTextNode","appendChild","element","_typeof","Symbol","iterator","constructor","REPLACE","REORDER","PROPS","TEXT","patch","patches","walker","dfsWalk","currentPatches","childNodes","applyPatches","currentPatch","newNode","parentNode","replaceChild","reorderChildren","moves","setProps","textContent","content","nodeValue","Error","removeAttribute","staticNodeList","maps","nodeType","getAttribute","move","removeChild","splice","insertNode","item","cloneNode","insertBefore","patch_1","diff","oldList","newList","oldMap","makeKeyIndexAndFree","newMap","newFree","free","oldKeyIndex","keyIndex","newKeyIndex","itemKey","freeIndex","getItemKey","hasOwnProperty","newItemIndex","freeItem","simulateList","remove","removeSimulate","j","simulateItem","simulateItemKey","insert","nextItemKey","listDiff2","require$$1","listDiff","require$$2","oldTree","newTree","oldNode","propsPatches","diffProps","isIgnoreChildren","diffChildren","oldChildren","newChildren","diffs","reorderPatch","leftNode","currentNodeIndex","newChild","oldProps","newProps","diff_1","renderTree","items","color","tree","root","body","setInterval"],"mappings":"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"}